<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="sentry-trace" content="{{ trace }}"/>
    <title>DU Attend v2 - ì†Œê°œ</title>
    {% include 'fragment/header.html' %}
</head>
<body>

<div style="padding-left: 0.5em; padding-right: 0.5em">
    <h1 style="text-align: center;">DU Attend ì†Œê°œ</h1>
    <hr>

    <!--    <div class="f18" id="alert">-->

    <!--    </div>-->

    <div>
        <h2>DU Attend ë€? </h2>
        <p>
            ìˆ˜ì—… ì§ì „ ì¶œê²° QRì„ ì°ìœ¼ëŸ¬ ê°ˆ í•„ìš” ì—†ì´ ìë¦¬ì—ì„œ ì „ìì¶œê²°ì„ ë„ì™€ì£¼ëŠ” ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤. <br>
            ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜ì—… 10ë¶„ì „ QRì¶œê²°ì„ ìœ„í•´ ê°•ì˜ì‹¤ ë¬¸ì•ì— ëª¨ì—¬ ì¶œê²°ì„ í•˜ëŠ”ë°ìš”. <br>
            ì•„ë˜ ë¦¬ìŠ¤íŠ¸ì— í•´ë‹¹ ë˜ì‹œëŠ” ë¶„ì—ê²Œ ì ê·¹ ì¶”ì²œí•©ë‹ˆë‹¤. ğŸ˜€<br>
        </p>

        <h2>ì´ëŸ° ë¶„ì—ê²Œ í•„ìš”í•´ìš”â—</h2>
        <p>
            âœ… ê°•ì˜ì‹¤ì— ë¯¸ë¦¬ ì™€ì„œ ëŒ€ê¸°í•œë‹¤.<br>
            âœ… ì¶œê²° QRí• ë•Œ ì‚¬ëŒ ëª¨ì´ëŠ”ê²Œ ë³µì¡í•˜ë‹¤.<br>
            âœ… ë‹¤ë¦¬ë¥¼ ë‹¤ì³ ê±°ë™ì´ ë¶ˆí¸í•˜ë‹¤.<br>
        </p>

        <div>
            <h2>ì§€ê¸ˆ ê°€ì…í•´ ë³´ì„¸ìš”!</h2>
            <form id="register_form" style="padding: 12px; border: 3px #198754 dashed;">
                <div class="row">
                    <div class="col-lg-12 col-md-12 mb-2" style="padding-right: 30px;">
                        <label for="username">ì•„ì´ë””(í•™ë²ˆ)</label>
                        <input type="text" id="username" style="width:100%" placeholder="í•™ë²ˆ">
                    </div>
                    <div class="col-lg-6 col-md-12 mb-2" style="padding-right: 30px;">
                        <label for="password">ì•”í˜¸</label>
                        <input type="password" id="password" style="width:100%" placeholder="4~32ìì˜ ì•”í˜¸">
                    </div>
                    <div class="col-lg-6 col-md-12" style="padding-right: 30px;">
                        <label for="password_repeat">ì•”í˜¸ ì¬ì…ë ¥</label>
                        <input type="password" id="password_repeat" style="width:100%" placeholder="ì•”í˜¸ ì¬ì…ë ¥">
                    </div>
                    <div class="col-lg-12 col-md-12">
                        <ul>
                            <li>í•™ë²ˆì€ ì¶œì„ì²´í¬ URLì„ ìƒì„±í•˜ëŠ” ë° í•„ìš”í•©ë‹ˆë‹¤.</li>
                            <li>ê°œì¸ì •ë³´ë¥¼ ì¼ì²´ ì €ì¥í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì•”í˜¸ ë¶„ì‹¤ì‹œ ë¬¸ì˜ë¥¼ í†µí•´ ì¬ì„¤ì •í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.<br><b>ê¸°ì–µí•  ìˆ˜ ìˆëŠ” ì•”í˜¸ë¡œ ì„¤ì •í•´ ì£¼ì„¸ìš”!</b></li>
                            <li>ì•”í˜¸ëŠ” ì„œë²„ì— <a
                                    href="https://ko.wikipedia.org/wiki/%EC%95%94%ED%98%B8%ED%99%94_%ED%95%B4%EC%8B%9C_%ED%95%A8%EC%88%98">ë‹¨ë°©í–¥
                                í•´ì‹œ</a>í•˜ì—¬ ì €ì¥í•©ë‹ˆë‹¤. ê´€ë¦¬ìë„ í•´ë…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                            </li>
                        </ul>
                    </div>
                    <div class="col-lg-12 col-md-12" style="">
                        <button type="button" id="login_btn" style="width: 100%" onclick="register();">íšŒì›ê°€ì…</button>
                    </div>
                </div>
            </form>

            <div id="register_complete" style="padding: 12px; border: 3px #198754 dashed; display: none">
                <div class="row">
                    <div class="col-lg-12 col-md-12" style="padding-right: 30px; text-align: center">
                        <div style="font-size: 1.6em;">ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div>
                        <div style="font-size: 1em;">ì•„ë˜ì—ì„œ ì‚¬ìš©ë²•ì„ ì½ì–´ë³´ì„¸ìš”!</div>
                        <div style="font-size: 1em;">ë‹¤ ì½ìœ¼ì…¨ë‹¤ë©´? <a href="/">ë©”ì¸í˜ì´ì§€ë¡œ â†’</a></div>
                    </div>

                </div>
            </div>
        </div>


        <h2>ì‚¬ìš©ë²•</h2>
        <img src="/static/image/intro.png" alt="QR ì„ ì°ëŠ” ì‚¬ëŒ, DU Mobile ì— ì ‘ì†í•˜ê³  ì¶œì„ ë§í¬ë¥¼ í´ë¦­í•˜ëŠ” ì‚¬ëŒ">
        <div>
            <ol>
                <li>íšŒì›ê°€ì… / ë¡œê·¸ì¸ í›„ ê°•ì˜ì‹¤ ì¶”ê°€ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</li>
                <li>ê°•ì˜ì‹¤ ë²½ë©´ì— ë¶€ì°©ëœ QR ì½”ë“œë¥¼ DU Attend ì„œë¹„ìŠ¤ì— ë¯¸ë¦¬ ìŠ¤ìº”í•©ë‹ˆë‹¤. (ê°•ì˜ì‹¤ë§ˆë‹¤ ìµœì´ˆ 1íšŒ)</li>
                <li>ì›í•˜ëŠ” ê°•ì˜ì‹¤ì˜ ì¶œì„ ë§í¬ë¥¼ ëˆ„ë¥´ì„¸ìš”. <b>2ë²ˆ ê³¼ì •ì„ í•œ ë²ˆë§Œ ì§„í–‰í•˜ë©´ ì´í›„ ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</b> ğŸ˜®</li>
            </ol>
        </div>

        <h2>ì£¼ì˜ì‚¬í•­</h2>
        <div>
            <ul>
                <li>ê°•ì˜ì‹¤ ê·¼ì²˜ì˜ DU Mobile Wifiì— ì ‘ì†í•´ì•¼ í•©ë‹ˆë‹¤.</li>
            </ul>
        </div>

        <h2>ì˜ê²¬Â·ë¬¸ì˜</h2>
        <span>ë¬¸ì˜ ì‹œìŠ¤í…œì€ í˜„ì¬ ê³µì‚¬ì¤‘ ì…ë‹ˆë‹¤. ë¶ˆí¸í•˜ì‹œê² ì§€ë§Œ ì•„ë˜ ë©”ì¼ë¡œ ì—°ë½ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</span>
        <div>
            <ul>
                <li>íŒ¨ìŠ¤ì›Œë“œ ë¶„ì‹¤ ë¬¸ì˜ â†’ <a href="mailto:attend.du@dlnk.io">attend.du@dLnk.io</a></li>
                <li>ê¸°íƒ€ ì˜ê²¬Â·ë¬¸ì˜ â†’ <a href="mailto:attend.du@dlnk.io">attend.du@dLnk.io</a></li>
            </ul>
        </div>

        <h2>ë§Œë“ ì´</h2>
        <span>MiscThings ë™ì•„ë¦¬ â†’ <a href="https://works.miscthings.net/" target="_blank">works.miscthings.net</a></span>
        <div>
            <ul>
                <li><span onclick="alert('ì´ìŠ¹ìš±')">ìŠ¹ìš°ê¸°</span>: í”„ë¡ íŠ¸ì—”ë“œ, í…ŒìŠ¤íŠ¸, êµì •, í™ë³´</li>
                <li>ì•ˆê±´ìš°: ë°±ì—”ë“œ, í”„ë¡ íŠ¸ì—”ë“œ, ë¬¸ì˜ì‘ëŒ€, ì„œë²„ì§€ì›</li>
                <li>ì´ì§„ìš°: í…ŒìŠ¤íŠ¸</li>
                <li>ì„œë³´ì„±: í…ŒìŠ¤íŠ¸</li>
                <li>ì´ì°½ì—½: í…ŒìŠ¤íŠ¸</li>
                <li>ì‹ ì§„ìš°: í…ŒìŠ¤íŠ¸</li>
            </ul>
        </div>

        <span><a href="/">í™ˆìœ¼ë¡œ â†’</a></span>

    </div>
</div>

{% include 'fragment/footer.html' %}


<script>
    let reg_mode = true;
    let SERVER_ADDRESS = "//attend.miscthings.net/"

    function detect_api_server() {
        return new Promise(function (resolve, reject) {
            $.ajax({
                url: "/7qy38tiejfkdnojiwgu9eyhijdfk",
                success: function (data) {
                    console.log("Hello api server!")
                    SERVER_ADDRESS = "/"
                    resolve()
                },
                error: function (xhr, status, err) {
                    resolve()
                },
                timeout: 500
            });
        })
    }

    async function register() {
        let trylogin = $("#login_btn")
        trylogin.attr("disabled", true)
        if (reg_mode && $("#password").val() !== $("#password_repeat").val()) {
            alert(`ì¬ì…ë ¥í•œ ì•”í˜¸ê°€ ë‹¤ë¦…ë‹ˆë‹¤.`);
            trylogin.attr("disabled", false);
            return;
        }

        $.ajax({
            method: "POST",
            url: SERVER_ADDRESS + "2204/register?promo_id=" + "{{promo_code|safe}}",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                std_id: $("#username").val(),
                password: $("#password").val(),
                type: 0,
                data: "",
                account_register: true
            }),
            success: function (data) {
                if (!data.success) {
                    if (data.code === "IDINVALID" || data.code === "PWINVALID" || data.code === "PWDIDNOTMATCH" || data.code === "ALREADYEXISTS") {
                        alert(data.message);
                        trylogin.attr("disabled", false);
                        return;
                    }
                }else{
                    localStorage.setItem("login_id", $("#username").val())
                    localStorage.setItem("password", $("#password").val())

                    if(data.new_token){
                        localStorage.setItem("password", data.new_token)
                    }

                    $("#register_form").hide();
                    $("#register_complete").show();
                }
            }
        });
    }

    $(document).ready(async function () {
        try{
            await detect_api_server();
        }catch (e) {

        }
    })

</script>

</body>
</html>